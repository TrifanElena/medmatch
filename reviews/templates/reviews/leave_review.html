{# reviews/templates/reviews/leave_review.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Lasă o recenzie – MedMatch{% endblock %}

{% block extra_css %}
<style>
  body {
    background: url("{% static 'images/leave_review_bg.png' %}") no-repeat center center fixed;
    background-size: cover;
  }
  .confirmation-card {
    max-width: 640px;
    margin: 3rem auto;
    background: rgba(255,255,255,0.95);
    padding: 2.5rem;
    border-radius: 0.75rem;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }
  .confirmation-card h2 {
    color: var(--color-back);
    margin-bottom: 1.5rem;
  }
  .confirmation-card p.intro {
    font-size: 0.95rem;
    color: #555;
    margin-bottom: 1.5rem;
  }

  /* Star rating (10 stele) */
  .star-rating {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 1.5rem;
    flex-direction: row-reverse;  /* păstrăm ca să apară 1→10 vizual */
  }
  .star-rating input {
    position: absolute;
    appearance: none;
  }
  .star-rating label {
    cursor: pointer;
    font-size: 24px;
    display: inline-block;
    transition: transform 0.2s ease;
  }
  .star-rating label svg {
    fill: #666;
    transition: fill 0.2s ease;
  }
  .star-rating label:hover,
  .star-rating label:hover ~ label {
    transform: scale(1.1);
  }
  .star-rating input:checked + label svg,
  .star-rating input:checked + label ~ label svg {
    fill: #ff9e0b;
    filter: drop-shadow(0 0 8px rgba(255,158,11,0.8));
  }
  .star-rating label:hover svg {
    fill: #ff9e0b;
    filter: drop-shadow(0 0 12px rgba(255,158,11,0.8));
  }

  .form-group {
    margin-bottom: 1.5rem;
    text-align: left;
  }
</style>
{% endblock %}

{% block content %}
<div class="confirmation-card text-center">
  <h2>Lasă o recenzie pentru {{ appointment.clinic.name }} – {{ appointment.specialty.name }}</h2>
  <p class="intro">
    Recenziile tale ne ajută să ne îmbunătățim serviciile medicale.<br>
    Te rugăm să fii sincer și politicos în exprimare.
  </p>

  <form method="post">
    {% csrf_token %}

    {# 1) Rating 1–10 fără text suplimentar #}
    <div class="form-group">
      <div class="star-rating">
        <!-- HTML inversat: 10→1 -->
        <input type="radio" id="star10" name="rating" value="10"
               {% if form.rating.value|stringformat:"s" == "10" %}checked{% endif %}>
        <label for="star10">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star9" name="rating" value="9"
               {% if form.rating.value|stringformat:"s" == "9" %}checked{% endif %}>
        <label for="star9">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star8" name="rating" value="8"
               {% if form.rating.value|stringformat:"s" == "8" %}checked{% endif %}>
        <label for="star8">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star7" name="rating" value="7"
               {% if form.rating.value|stringformat:"s" == "7" %}checked{% endif %}>
        <label for="star7">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star6" name="rating" value="6"
               {% if form.rating.value|stringformat:"s" == "6" %}checked{% endif %}>
        <label for="star6">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star5" name="rating" value="5"
               {% if form.rating.value|stringformat:"s" == "5" %}checked{% endif %}>
        <label for="star5">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star4" name="rating" value="4"
               {% if form.rating.value|stringformat:"s" == "4" %}checked{% endif %}>
        <label for="star4">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star3" name="rating" value="3"
               {% if form.rating.value|stringformat:"s" == "3" %}checked{% endif %}>
        <label for="star3">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star2" name="rating" value="2"
               {% if form.rating.value|stringformat:"s" == "2" %}checked{% endif %}>
        <label for="star2">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>

        <input type="radio" id="star1" name="rating" value="1"
               {% if form.rating.value|stringformat:"s" == "1" %}checked{% endif %}>
        <label for="star1">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 .587l3.668 7.431l8.207 1.193l-5.937 5.789l1.402 8.178L12 18.902l-7.34 3.866l1.402-8.178L.124 9.211l8.207-1.193z"/>
          </svg>
        </label>
      </div>
      {% if form.rating.errors %}
        <div class="text-danger">{{ form.rating.errors.0 }}</div>
      {% endif %}
    </div>

    {# 2) Comentariu #}
    <div class="form-group">
      {{ form.text.label_tag }}
      {{ form.text }}
      {% if form.text.errors %}
        <div class="text-danger">{{ form.text.errors.0 }}</div>
      {% endif %}
    </div>

    {# 3) Checkbox anonim #}
    <div class="form-group">
      {{ form.anonymous }} {{ form.anonymous.label_tag }}
      {% if form.anonymous.errors %}
        <div class="text-danger">{{ form.anonymous.errors.0 }}</div>
      {% endif %}
    </div>

    {# 4) Butoane și mesaje #}
    <div class="d-flex justify-content-center gap-3">
      <button type="submit" class="btn btn-success">
        Trimite recenzia
      </button>
      <a href="{% url 'reviews:list' %}" class="btn btn-outline-info">
        Vezi recenzii
      </a>
    </div>

    {% if messages %}
      <div class="alert alert-success mt-3">
        {% for message in messages %}
          {{ message }}
        {% endfor %}
      </div>
    {% endif %}
  </form>
</div>
{% endblock %}



<!-- 
<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Lasă o recenzie</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 2rem;
        }
        .confirmation-card {
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .confirmation-card h2 {
            color: #1c0270;
            margin-bottom: 1.5rem;
        }
        .confirmation-card p.intro {
            font-size: 0.95rem;
            color: #555;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body class="container mt-5">
    <div class="confirmation-card">
    <h2 class="text-center">Lasă o recenzie pentru {{ appointment.clinic.name }} – {{ appointment.specialty.name }}</h2>

    <p class="intro text-center">
        Recenziile tale ne ajută să ne îmbunătățim serviciile medicale.<br>
        Te rugăm să fii sincer și politicos în exprimare.
    </p>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success">Trimite recenzia</button>
        {% if messages %}
    <div class="alert alert-success mt-3">
        {% for message in messages %}
            {{ message }}
        {% endfor %}
    </div>
{% endif %}
<a href="{% url 'reviews:list' %}" class="btn btn-outline-info">Vezi recenzii</a>
</div>
    </form>
</div>
</body>
</html> -->
